<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Texturing # Problema # Implemente herramientas para variar la luminosidad como HSL o HSV y añadale tinte a las texturas mediante la mezcla de colores
Manual de usuario del Sketch # El sketch consta de una imagen cuyos tintes de color y luminosidad varían dependiendo del valor asignado por el slider, cuyos valores se situan entre 0 y 1. En la parte inferior del slider se encuentran 4 botones cuya prioridad está organizada en el siguiente orden: Imagemix Colormix hsl hsv En caso de que un botón en específico esté activado, los de prioridades inferiores no tendrán efecto sobre la imagen."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Texturing # Problema # Implemente herramientas para variar la luminosidad como HSL o HSV y añadale tinte a las texturas mediante la mezcla de colores
Manual de usuario del Sketch # El sketch consta de una imagen cuyos tintes de color y luminosidad varían dependiendo del valor asignado por el slider, cuyos valores se situan entre 0 y 1. En la parte inferior del slider se encuentran 4 botones cuya prioridad está organizada en el siguiente orden: Imagemix Colormix hsl hsv En caso de que un botón en específico esté activado, los de prioridades inferiores no tendrán efecto sobre la imagen."><meta property="og:type" content="article"><meta property="og:url" content="https://joluva.github.io/showcase/docs/Shaders/texturing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-06-19T09:07:12-05:00"><title>Texturing | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/showcase/docs/visual-Illusions/>Visual Illusions</a><ul><li><a href=/showcase/docs/visual-Illusions/Coloring/>Coloring</a></li><li><a href=/showcase/docs/visual-Illusions/MachBands/>Mach Bands</a></li><li><input type=checkbox id=section-b4599f2a787d4958fae4ebc1b74f5587 class=toggle>
<label for=section-b4599f2a787d4958fae4ebc1b74f5587 class="flex justify-between"><a href=/showcase/docs/visual-Illusions/masking/>Masking</a></label><ul><li><a href=/showcase/docs/visual-Illusions/masking/Image-quantization/>Image Quantization</a></li><li><a href=/showcase/docs/visual-Illusions/masking/convolution/>Convolution</a></li><li><a href=/showcase/docs/visual-Illusions/masking/histogram/>Histogram</a></li><li><a href=/showcase/docs/visual-Illusions/masking/kinegram/>Kinegram</a></li><li><a href=/showcase/docs/visual-Illusions/masking/lightness/>Lightness</a></li><li><a href=/showcase/docs/visual-Illusions/masking/moire-pattern/>Moire Pattern</a></li></ul></li><li><a href=/showcase/docs/visual-Illusions/Spatial-Coherence-/>Spatial Coherence</a></li><li><a href=/showcase/docs/visual-Illusions/Temporal-Coherence/>Temporal Coherence</a></li><li><a href=/showcase/docs/visual-Illusions/Depth-perception/>Depth Perception</a></li><li><a href=/showcase/docs/visual-Illusions/VideoSustentacion/>Video Sustentacion</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Rendering/>Rendering</a><ul></ul></li><li class=book-section-flat><span>Nosotros</span><ul><li><a href=/showcase/docs/nosotros/jose/>Jose</a></li><li><a href=/showcase/docs/nosotros/luis/>Luis</a></li><li><a href=/showcase/docs/nosotros/vale/>Vale</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Shaders/>Shaders</a><ul><li><a href=/showcase/docs/Shaders/Color-blending/>Color Blending</a></li><li><a href=/showcase/docs/Shaders/Posteffects/>Posteffects</a></li><li><a href=/showcase/docs/Shaders/Procedural-Texturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/Shaders/Spatial-coherence/>Spatial Coherence</a></li><li><a href=/showcase/docs/Shaders/texturing/ class=active>Texturing</a></li><li><a href=/showcase/docs/Shaders/Photomosaic/>Photomosaic</a></li></ul></li><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/showcase/docs/shortcodes/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tabs/>Tabs</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Space-transformations/>Space Transformations</a><ul></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Texturing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#texturing>Texturing</a><ul><li><ul><li><a href=#problema>Problema</a></li><li><a href=#manual-de-usuario-del-sketch>Manual de usuario del Sketch</a></li><li><a href=#implementación>Implementación</a></li><li><a href=#código>Código</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=texturing>Texturing
<a class=anchor href=#texturing>#</a></h1><iframe id=texturing style=width:1100px;height:2100px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/texturing.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=problema>Problema
<a class=anchor href=#problema>#</a></h3><p>Implemente herramientas para variar la luminosidad como HSL o HSV y añadale tinte a las texturas mediante la mezcla de colores</p><h3 id=manual-de-usuario-del-sketch>Manual de usuario del Sketch
<a class=anchor href=#manual-de-usuario-del-sketch>#</a></h3><p style=text-align:justify>El sketch consta de una imagen cuyos tintes de color y luminosidad varían dependiendo del valor asignado por el slider, cuyos valores se situan entre 0 y 1.
En la parte inferior del slider se encuentran 4 botones cuya prioridad está organizada en el siguiente orden:<ol><li>Imagemix</li><li>Colormix</li><li>hsl</li><li>hsv</li></ol></p><p style=text-align:justify>En caso de que un botón en específico esté activado, los de prioridades inferiores no tendrán efecto sobre la imagen. Por ejemplo, si quiero activar hsv los demás deben estar desactivados.</p><h3 id=implementación>Implementación
<a class=anchor href=#implementaci%c3%b3n>#</a></h3><p style=text-align:justify>Image mix: Se genera un mix en cada pixel de la imagen base y el pixel ubicado en la misma posición en una imagen auxiliar mediante el uso de la función
buitin mix de glsl, la cual dados dos colores y un grado interpolación, genera la variación correspondiente del color</p><p style=text-align:justify>Color mix: De la misma manera que se hace en Image mix, en esta configuración se usa la función builtin mix, sin embargo en este caso se mezcla con un color en específico dado por el colorPicker y no con otra imagen.</p><p style=text-align:justify>Hsl: Para variar la luminosidad de la imagen, cada pixel es transformado de formato rgb a hsl mediante el uso de las fórmulas correspondientes, posteriormente se les asigna el nuevo valor de luminosidad dado por el slider y finalmente se devuelve su valor a rgb para la asignación al pixel correspondiente.</p><p style=text-align:justify>Hsv: Para variar la luminosidad de la imagen, cada pixel es transformado de formato rgb a hsv mediante el uso de las fórmulas correspondientes, posteriormente se les asigna el nuevo valor de luminosidad dado por el slider y finalmente se devuelve su valor a rgb para la asignación al pixel correspondiente.</p><h3 id=código>Código
<a class=anchor href=#c%c3%b3digo>#</a></h3><p>Shader encargado de mezclar colores e imágenes.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>; <span style=color:#75715e>// The input texture
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture1</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>tint</span>; <span style=color:#75715e>// The tint color to apply
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texcoords2</span>; <span style=color:#75715e>// Interpolated texture coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Sample the texture at the current fragment&#39;s texture coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>texel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>texel1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture1</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Mix the texel color and the tint color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>mixedColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>mix</span>(<span style=color:#a6e22e>texel</span>, <span style=color:#a6e22e>texel1</span>, <span style=color:#a6e22e>tint</span>.<span style=color:#a6e22e>a</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>mix</span>(<span style=color:#a6e22e>texel</span>, <span style=color:#a6e22e>tint</span>, <span style=color:#a6e22e>tint</span>.<span style=color:#a6e22e>a</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Output the resulting color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span>  <span style=color:#a6e22e>mixedColor</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></p><p>Shader encargado de variar luminosidad tanto en hsl como hsv.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>hslOpt</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>hsvOpt</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>light</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texcoords2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgbTohsl</span>(<span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>c</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>minValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span>),<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>maxValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>r</span>,<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span>),<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>maxValue</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>minValue</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>maxValue</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>minValue</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>abs</span>(<span style=color:#ae81ff>2.0</span><span style=color:#f92672>*</span><span style=color:#a6e22e>l</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.0</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>h</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>maxValue</span><span style=color:#f92672>==</span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>r</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>6.0</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>maxValue</span><span style=color:#f92672>==</span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>r</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>maxValue</span><span style=color:#f92672>==</span><span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>b</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>g</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mod</span>(<span style=color:#a6e22e>h</span>,<span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>h</span>,<span style=color:#a6e22e>s</span>,<span style=color:#a6e22e>l</span>,<span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> <span style=color:#a6e22e>hueToRgb</span>(<span style=color:#66d9ef>float</span> <span style=color:#a6e22e>p</span>, <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>q</span>, <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>t</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.0</span>) <span style=color:#a6e22e>t</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1.0</span>) <span style=color:#a6e22e>t</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1.0</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>q</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>p</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>6.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>t</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2.0</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>q</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3.0</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>q</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>p</span>) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>t</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>6.0</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>p</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hslToRgb</span>(<span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hsl</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsl</span>.<span style=color:#a6e22e>x</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>saturation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsl</span>.<span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsl</span>.<span style=color:#a6e22e>z</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>saturation</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0.0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>lightness</span>),<span style=color:#ae81ff>1.0</span>); <span style=color:#75715e>// Achromatic, return L for R, G, B
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>q</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.0</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>saturation</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>saturation</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>saturation</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>p</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>lightness</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>q</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hueToRgb</span>(<span style=color:#a6e22e>p</span>, <span style=color:#a6e22e>q</span>, <span style=color:#a6e22e>hue</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hueToRgb</span>(<span style=color:#a6e22e>p</span>, <span style=color:#a6e22e>q</span>, <span style=color:#a6e22e>hue</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hueToRgb</span>(<span style=color:#a6e22e>p</span>, <span style=color:#a6e22e>q</span>, <span style=color:#a6e22e>hue</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3.0</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>b</span>,<span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgbToHsv</span>(<span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgb</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>maxVal</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>b</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>minVal</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>b</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>maxVal</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>minVal</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>saturation</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>maxVal</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>delta</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0.0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>maxVal</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>b</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span>;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>maxVal</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.0</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span>;
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4.0</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>rgb</span>.<span style=color:#a6e22e>g</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>delta</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hue</span> <span style=color:#f92672>/=</span> <span style=color:#ae81ff>6.0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>saturation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>delta</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>hue</span>, <span style=color:#a6e22e>saturation</span>, <span style=color:#a6e22e>value</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hsvToRgb</span>(<span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hsv</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsv</span>.<span style=color:#a6e22e>x</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>saturation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsv</span>.<span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsv</span>.<span style=color:#a6e22e>z</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>saturation</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0.0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>value</span>),<span style=color:#ae81ff>1.0</span>); <span style=color:#75715e>// Achromatic, return V for R, G, B
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>saturation</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>mod</span>(<span style=color:#a6e22e>hue</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>6.0</span>, <span style=color:#ae81ff>2.0</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1.0</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>rgb</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>hue</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>x</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>hue</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>c</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>hue</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>x</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>hue</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>c</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>hue</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>6.0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>x</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#a6e22e>c</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec3</span>(<span style=color:#a6e22e>c</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#a6e22e>x</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>rgb</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>m</span>,<span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>texel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>hslOpt</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hslColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>rgbTohsl</span>(<span style=color:#a6e22e>texel</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>hslColor</span>.<span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>light</span>; 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hslToRgb</span>(<span style=color:#a6e22e>hslColor</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>hsvOpt</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>hsvColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>rgbToHsv</span>(<span style=color:#a6e22e>texel</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>hsvColor</span>.<span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>light</span>; 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hsvToRgb</span>(<span style=color:#a6e22e>hsvColor</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texel</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>}</span></span></code></pre></div></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/4d22742809ba5e5d2ef975b33611ecacb7876a90 title='Last modified by jmorenohj | June 19, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 19, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#texturing>Texturing</a><ul><li><ul><li><a href=#problema>Problema</a></li><li><a href=#manual-de-usuario-del-sketch>Manual de usuario del Sketch</a></li><li><a href=#implementación>Implementación</a></li><li><a href=#código>Código</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>