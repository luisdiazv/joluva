<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Image processing # Problema # Implemente una app de proceso de imágenes que permita aplicar filtros de convolución de distintos tamaños, una región de interés y una herramienta de aumento. Manual de usuario del Sketch # El sketch consta de un slider y distintas configuraciones con las cuales pueden variar los efectos aplicados. El slider permite variar el tamaño de la región de interés que se forma al rededor de la posición del mouse."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://joluva.github.io/showcase/docs/Shaders/"><title>Shaders | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://joluva.github.io/showcase/docs/Shaders/index.xml title="Showcase Template"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/showcase/docs/visual-Illusions/>Visual Illusions</a><ul><li><a href=/showcase/docs/visual-Illusions/Coloring/>Coloring</a></li><li><a href=/showcase/docs/visual-Illusions/MachBands/>Mach Bands</a></li><li><input type=checkbox id=section-b4599f2a787d4958fae4ebc1b74f5587 class=toggle>
<label for=section-b4599f2a787d4958fae4ebc1b74f5587 class="flex justify-between"><a href=/showcase/docs/visual-Illusions/masking/>Masking</a></label><ul><li><a href=/showcase/docs/visual-Illusions/masking/Image-quantization/>Image Quantization</a></li><li><a href=/showcase/docs/visual-Illusions/masking/convolution/>Convolution</a></li><li><a href=/showcase/docs/visual-Illusions/masking/histogram/>Histogram</a></li><li><a href=/showcase/docs/visual-Illusions/masking/kinegram/>Kinegram</a></li><li><a href=/showcase/docs/visual-Illusions/masking/lightness/>Lightness</a></li><li><a href=/showcase/docs/visual-Illusions/masking/moire-pattern/>Moire Pattern</a></li></ul></li><li><a href=/showcase/docs/visual-Illusions/Spatial-Coherence-/>Spatial Coherence</a></li><li><a href=/showcase/docs/visual-Illusions/Temporal-Coherence/>Temporal Coherence</a></li><li><a href=/showcase/docs/visual-Illusions/Depth-perception/>Depth Perception</a></li><li><a href=/showcase/docs/visual-Illusions/VideoSustentacion/>Video Sustentacion</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Rendering/>Rendering</a><ul></ul></li><li class=book-section-flat><span>Nosotros</span><ul><li><a href=/showcase/docs/nosotros/jose/>Jose</a></li><li><a href=/showcase/docs/nosotros/luis/>Luis</a></li><li><a href=/showcase/docs/nosotros/vale/>Vale</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Shaders/ class=active>Shaders</a><ul><li><a href=/showcase/docs/Shaders/Color-blending/>Color Blending</a></li><li><a href=/showcase/docs/Shaders/Posteffects/>Posteffects</a></li><li><a href=/showcase/docs/Shaders/Procedural-Texturing/>Procedural Texturing</a></li><li><a href=/showcase/docs/Shaders/Spatial-coherence/>Spatial Coherence</a></li><li><a href=/showcase/docs/Shaders/texturing/>Texturing</a></li><li><a href=/showcase/docs/Shaders/Photomosaic/>Photomosaic</a></li></ul></li><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/showcase/docs/shortcodes/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-ec67a64aba70b9df3d2a9acd6c92e3bc class=toggle>
<label for=section-ec67a64aba70b9df3d2a9acd6c92e3bc class="flex justify-between"><a href=/showcase/docs/shortcodes/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tabs/>Tabs</a></li></ul></li><li class=book-section-flat><a href=/showcase/docs/Space-transformations/>Space Transformations</a><ul></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Shaders</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#image-processing>Image processing</a><ul><li><ul><li><a href=#problema>Problema</a></li><li><a href=#manual-de-usuario-del-sketch>Manual de usuario del Sketch</a></li><li><a href=#implementación>Implementación</a></li><li><a href=#código>Código</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=image-processing>Image processing
<a class=anchor href=#image-processing>#</a></h1><iframe id=fishEye style=width:625px;height:975px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/showcase/sketches/fishEye.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=problema>Problema
<a class=anchor href=#problema>#</a></h3><p style=text-align:justify>Implemente una app de proceso de imágenes que permita aplicar filtros de convolución de distintos tamaños, una región de interés y una herramienta de aumento.</p><h3 id=manual-de-usuario-del-sketch>Manual de usuario del Sketch
<a class=anchor href=#manual-de-usuario-del-sketch>#</a></h3><p style=text-align:justify>El sketch consta de un slider y distintas configuraciones con las cuales pueden variar los efectos aplicados.
El slider permite variar el tamaño de la región de interés que se forma al rededor de la posición del mouse.</p><p style=text-align:justify>Al cambiar el estado del atributo "Filtro 3x3 o 5x5", se cambia el filtro de convolución aplicado. El filtro de tamaño 3x3 genera el efecto de los bordes de la imagen mientras que el filtro de tamaño 5x5 aumenta ligeramente la nitidez de la imagen.</p><p style=text-align:justify>En caso de que el atributo "zone" esté desactivado, la región de interés desaparecerá tanto para las convoluciones como para el zoom y la convolución se aplicara de forma pareja a toda la imagen.</p><p style=text-align:justify>si el atributo zone está encendido, se pueden formar las siguientes configuraciones: Zona de interés con convolución, zona de interés con aumento, zona de interés con aumento y convolución.</p><h3 id=implementación>Implementación
<a class=anchor href=#implementaci%c3%b3n>#</a></h3><p style=text-align:justify>Para poder variar los filtros de convolución se generaron dos sketches, uno correspondiente al filtro 3x3 y otro para el filtro 5x5. En ambos casos el funcionamiento es el mismo.<p>Para poder generar la región de interés, se tiene en cuenta la posición del mouse y la distancia de cada pixel a esta, en caso de que la distancia sea mayor a cierto radio, no se le aplicará el efecto deseado a dicho pixel.</p></p><p style=text-align:justify>Para generar el efecto de aumento, se aplica un mapeo a los píxeles dentro del area de interés, en el cual a cada pixel se le asigna el valor de un pixel en una posición mas cercana a la posición del mouse, de esta forma se genera el efecto de aumento.</p><p style=text-align:justify>Respecto a la convolución, se utilizó el algoritmo clásico, en el cual se ponderan los valores de los pixeles aledaños a cada pixel y se le asigna ese valor a dicho pixel.</p><h3 id=código>Código
<a class=anchor href=#c%c3%b3digo>#</a></h3><p>Shader para la convolución de tamaño 5x5.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texOffset</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>mask</span>[<span style=color:#ae81ff>25</span>];
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>mouse</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>magnify</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>zone</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>bool</span> <span style=color:#a6e22e>conv</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texcoords2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>aumentFactor</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>x</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texcoords2</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>((<span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>mouse</span>,<span style=color:#a6e22e>texcoords2</span>)<span style=color:#f92672>&lt;=</span><span style=color:#a6e22e>radius</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>conv</span>) <span style=color:#f92672>||</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>zone</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>conv</span>)){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>magnify</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>dx</span><span style=color:#f92672>/</span><span style=color:#a6e22e>aumentFactor</span>),<span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>dy</span><span style=color:#f92672>/</span><span style=color:#a6e22e>aumentFactor</span>))<span style=color:#f92672>:</span><span style=color:#a6e22e>texcoords2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc0</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc5</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc6</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc7</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc9</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc10</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc11</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc12</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc13</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc14</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc15</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>,<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc16</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc17</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc18</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc19</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc20</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc21</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span><span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc22</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc23</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#ae81ff>0.0</span>,<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc24</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texpos</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span><span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 2. Sample texel neighbours within the rgba array
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>25</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc3</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc6</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc7</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc8</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>9</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc9</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>10</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>11</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc11</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>12</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc12</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>13</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc13</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>14</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc14</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>15</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc15</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>16</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc16</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>17</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc17</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>18</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc18</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>19</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc19</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>20</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc20</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>21</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc21</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>22</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc22</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>23</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc23</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>24</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc24</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 3. Apply convolution kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>convolution</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>25</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>convolution</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>*</span><span style=color:#a6e22e>mask</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>convolution</span>.<span style=color:#a6e22e>rgb</span>, <span style=color:#ae81ff>1.0</span>),<span style=color:#a6e22e>vec4</span>(<span style=color:#ae81ff>1.0</span>)),<span style=color:#a6e22e>vec4</span>(<span style=color:#ae81ff>0.0</span>)); 
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>magnify</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>mouse</span>,<span style=color:#a6e22e>texcoords2</span>)<span style=color:#f92672>&lt;=</span><span style=color:#a6e22e>radius</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span>  <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>,<span style=color:#a6e22e>vec2</span>(<span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>dx</span><span style=color:#f92672>/</span><span style=color:#a6e22e>aumentFactor</span>),<span style=color:#a6e22e>mouse</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>dy</span><span style=color:#f92672>/</span><span style=color:#a6e22e>aumentFactor</span>)));
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span>  <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>texcoords2</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}</span></span></code></pre></div></p><p style=text-align:justify></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/4d22742809ba5e5d2ef975b33611ecacb7876a90 title='Last modified by jmorenohj | June 19, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 19, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#image-processing>Image processing</a><ul><li><ul><li><a href=#problema>Problema</a></li><li><a href=#manual-de-usuario-del-sketch>Manual de usuario del Sketch</a></li><li><a href=#implementación>Implementación</a></li><li><a href=#código>Código</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>